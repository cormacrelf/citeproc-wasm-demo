(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{685:function(e,t,n){var r=n(686);"string"==typeof r&&(r=[[e.i,r,""]]);var i={insert:"head",singleton:!1};n(252)(r,i);r.locals&&(e.exports=r.locals)},686:function(e,t,n){(e.exports=n(251)(!1)).push([e.i,'body {\n  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";\n}\n\n.footnote {\n    font-family: serif;\n}\n\n/* This sets the color for "TK" nodes to a light blue green. */\ng.type-Accepting > rect {\n  fill: #00ffd0;\n}\n\ng.type-BuiltIn .edgeLabel {\n    color: red;\n}\n\ntext {\n  font-weight: 300;\n  font-size: 14px;\n}\n\n.node rect {\n  stroke: #999;\n  fill: #fff;\n  stroke-width: 1.5px;\n}\n\n.edgePath path {\n  stroke: #333;\n  stroke-width: 1.5px;\n}\n\n',""])},706:function(e,t,n){var r=n(707);"string"==typeof r&&(r=[[e.i,r,""]]);var i={insert:"head",singleton:!1};n(252)(r,i);r.locals&&(e.exports=r.locals)},707:function(e,t,n){(e.exports=n(251)(!1)).push([e.i,".csl-bib-body { line-height: 1.35; display: grid; grid-template-columns: max-content 1fr; }\n.csl-entry { display: contents; }\n.csl-block { grid-column: 1/span 2; background: lightpink; }\n.csl-left-margin { background: aliceblue; padding-right: 1em;}\n.csl-right-inline {  background: lightgoldenrodyellow; }\n.csl-indent { margin-left: 2em; grid-column: 1/span 2; background: lightsalmon; }\n",""])},714:function(e,t,n){"use strict";n.r(t);var r=n(61),i=n.n(r),a=n(0),s=n.n(a),l=n(257),u=n(263),c=n.n(u),o=n(712),d=n(264),f=n.n(d),p=n(284),h=n.n(p),m=n(22),v=n(713),y=n(711),b=(n(685),function(e){var t=e.dotString;if(null==t)return s.a.createElement(s.a.Fragment,null);var n=Object(a.useRef)(),r=Object(a.useRef)(),i=h.a.render();return Object(a.useEffect)(function(){var e=Object(m.f)(n.current),a=Object(m.f)(r.current),s=f.a.read(t);s.nodes().forEach(function(e){var t=s.node(e);t.rx=t.ry=5,t.label.match(/Accepting/)?t.class="type-Accepting":t.class=""}),s.edges().forEach(function(e){var t=s.edge(e);t.label.match(/Output/)||(t.labelStyle="font-weight: bold;"),t.curve=y.a.beta(.8)}),i(a,s);var l=n.current;if(null!=l){var u=l.getBBox(),c=u.height,o=u.width,d=s.graph(),p=d.height,h=o-d.width,b=c-p;e.attr("height",c),e.attr("width",o+30),a.attr("transform",v.a.translate(h,b))}return function(){a.selectAll("*").remove()}},[t,n.current]),s.a.createElement("svg",{className:"dagre-d3",ref:n,width:900,height:800},s.a.createElement("g",{ref:r}))}),g=function(e){var t=e.driver,n=e.references,r=n.map(function(e){return{value:e.id,label:e.id}});r.splice(0,0,{value:null,label:"None"});var l=Object(a.useState)(null),u=i()(l,2),c=u[0],d=u[1],f=n.find(function(e){return e.id==c});return s.a.createElement("div",null,s.a.createElement("div",{style:{maxWidth:"400px"}},s.a.createElement(o.a,{options:r,onChange:function(e){var t=e.value;d(t)}})),null!=f&&t.map(function(e){return e.disambiguationDfaDot(c||"")}).map(function(e){return s.a.createElement(b,{dotString:e})}).unwrap_or(s.a.createElement(s.a.Fragment,null)))},w=n(67),k=n.n(w);n(706);function E(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function O(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?E(n,!0).forEach(function(t){k()(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):E(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var x={display:"inline"},j=function(e){var t=e.document,n=e.onChange,r=e.showBibliography,l=Object(a.useState)(""),u=i()(l,2),c=u[0],o=u[1],d=function(e){var r=t.produce(function(t){var n=t.createCluster([{id:"citekey"}]);t.insertCluster(n,e)});n(r)},f=t.clusters.map(function(e){return s.a.createElement("div",{key:e.id},s.a.createElement("button",{style:x,onClick:function(){return d(e.id)}},"+cluster"),s.a.createElement(R,{key:e.id,cluster:e,removeCluster:function(){return n(t.produce(function(t){return t.removeCluster(e.id)}))},updateCluster:function(e){return n(t.produce(function(t){return t.replaceCluster(e)}))}}))});return s.a.createElement(s.a.Fragment,null,f,s.a.createElement("button",{style:x,onClick:function(){return d(null)}},"+cluster"),s.a.createElement("div",null,"Include uncited items?",s.a.createElement("input",{style:{width:400},type:"text",value:c,onChange:function(e){var n=e.target.value,r="None",i=n;if("All"==n)r="All";else if("None"==n)r="None";else if(""==n)r="None";else{var a=e.target.value.split(/, */);r={Specific:a},i=a.join(", ")}t.produce(function(e){return e.setIncludeUncited(r)}),o(i)},placeholder:"None (default), All, or a comma-separated list of citekeys"})),s.a.createElement(C,{showBibliography:r,renderedDocument:t.rendered}))},C=s.a.memo(function(e){var t=e.renderedDocument,n=e.showBibliography,r=t.orderedClusterIds.map(function(e){var n=t.builtClusters[e.id],r=t.updatedLastRevision[e.id];return s.a.createElement(S,{key:e.id,note:e.note,html:n,touched:r})}),i=null;if(n){var a=t.bibliographyIds.map(function(e,n){var r=t.bibliography[e];return s.a.createElement("div",{key:n,className:"footnote csl-entry",dangerouslySetInnerHTML:{__html:r}})});i=s.a.createElement(s.a.Fragment,null,s.a.createElement("h2",null,"Bibliography"),s.a.createElement("div",{className:"csl-bib-body"},a))}return s.a.createElement("div",null,r,i)}),S=s.a.memo(function(e){var t=e.note,n=e.html,r=e.touched?{backgroundColor:"lightgoldenrodyellow"}:{};return s.a.createElement("p",{className:"footnote",style:r,dangerouslySetInnerHTML:{__html:t+". "+n}})}),R=function(e){var t=e.cluster,n=e.updateCluster,r=e.removeCluster,l=Object(a.useState)(t),u=i()(l,2),c=u[0],o=u[1],d=t.cites.map(function(e,t){return s.a.createElement(I,{key:t,cite:e,update:function(e){var r=c.cites.slice(0);r[t]=e;var i=O({},c,{cites:r});o(i),n(i)}})});return d.push(s.a.createElement("button",{style:x,key:"removeCluster",onClick:r},"-cluster")),s.a.createElement(s.a.Fragment,null,d)};var I=function(e){var t,n,r,l=e.cite,u=e.update,c=Object(a.useState)(l.id),o=i()(c,2),d=o[0],f=o[1],p=Object(a.useState)(l.locator),h=i()(p,2),m=h[0],v=h[1],y=Object(a.useCallback)(function(e){var t=e.target.value;f(t)},[]),b=Object(a.useCallback)(function(e){var t=e.target.value;""==t&&(t=void 0),v(t)},[]);return t=function(){u(O({},l,{id:d,locators:void 0,locator:m}))},n=[d,m],r=Object(a.useRef)(!1),Object(a.useEffect)(function(){r.current?t():r.current=!0},n),s.a.createElement(s.a.Fragment,null,s.a.createElement("input",{value:d,onChange:y}),s.a.createElement("input",{value:m,onChange:b}))},P=n(3),U=n.n(P),A=n(4),D=n.n(A),N=n(1),_=n.n(N),F=n(5),B=n.n(F),L=n(19),T=n(708),M=function(){function e(t,n,r){U()(this,e),k()(this,"builtClusters",{}),k()(this,"bibliographyIds",[]),k()(this,"bibliography",{}),k()(this,"orderedClusterIds",[]),k()(this,"updatedLastRevision",{}),this[T.a]=!0,this.orderedClusterIds=n;var i=r.fullRender().unwrap();this.builtClusters=i.allClusters;var a=!0,s=!1,l=void 0;try{for(var u,c=i.bibEntries[Symbol.iterator]();!(a=(u=c.next()).done);a=!0){var o=u.value;this.bibliographyIds.push(o.id),this.bibliography[o.id]=o.value}}catch(e){s=!0,l=e}finally{try{a||null==c.return||c.return()}finally{if(s)throw l}}}return D()(e,[{key:"update",value:function(e,t){return Object(T.b)(this,function(n){n.updatedLastRevision={},n.orderedClusterIds=t;var r=e.bibliography;if(null!=r){var a=r.entryIds;null!=a&&(n.bibliographyIds=a);for(var s=0,l=Object.keys(r.updatedEntries);s<l.length;s++){var u=l[s];n.bibliography[u]=r.updatedEntries[u]}}var c=!0,o=!1,d=void 0;try{for(var f,p=e.clusters[Symbol.iterator]();!(c=(f=p.next()).done);c=!0){var h=i()(f.value,2),m=h[0],v=h[1];n.builtClusters[m]=v,n.updatedLastRevision[m]=!0}}catch(e){o=!0,d=e}finally{try{c||null==p.return||p.return()}finally{if(o)throw d}}})}}]),e}(),J=function(){function e(t,n){U()(this,e),this.constructor_=t,this.destructor=n,k()(this,"citekeyRefcounts",new Map)}return D()(e,[{key:"increment",value:function(e){var t=!0,n=!1,r=void 0;try{for(var i,a=e.cites[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){var s=i.value,l=this.citekeyRefcounts.get(s.id);this.citekeyRefcounts.set(s.id,(l||0)+1),void 0===l&&this.constructor_(s.id)}}catch(e){n=!0,r=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw r}}}},{key:"decrement",value:function(e){var t=!0,n=!1,r=void 0;try{for(var i,a=e.cites[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){var s=i.value,l=this.citekeyRefcounts.get(s.id);if(void 0!==l&&l>0){var u=l-1;0===u?(this.citekeyRefcounts.delete(s.id),this.destructor(s.id)):this.citekeyRefcounts.set(s.id,u)}}}catch(e){n=!0,r=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw r}}}}]),e}(),z=function(){function e(t,n){U()(this,e),k()(this,"driver",void 0),k()(this,"clusters",void 0),k()(this,"includeUncited","None"),k()(this,"rendered",void 0),k()(this,"refCounts",void 0),this.refCounts=new J(function(e){},function(e){}),this.clusters=t,this.initCitekeys(),n&&this.init(n)}return D()(e,[{key:"initCitekeys",value:function(){var e=!0,t=!1,n=void 0;try{for(var r,i=this.clusters[Symbol.iterator]();!(e=(r=i.next()).done);e=!0){var a=r.value;this.refCounts.increment(a)}}catch(e){t=!0,n=e}finally{try{e||null==i.return||i.return()}finally{if(t)throw n}}}},{key:"init",value:function(e){this.driver=e,e.initClusters(this.clusters).unwrap(),e.setClusterOrder(this.clusterPositions()).unwrap(),e.includeUncited(this.includeUncited).unwrap(),this.rendered=new M(this.clusters,this.clusterPositions(),e),console.log(this.driver)}},{key:"rebuild",value:function(e){return this.init(e),this}},{key:"selfUpdate",value:function(){return this.produce(function(){})}},{key:"produce",value:function(e){var t=this,n=this.driver;return Object(T.b)(this,function(r){e(r),n.setClusterOrder(r.clusterPositions()),console.time("batchedUpdates");var i=n.batchedUpdates().unwrap();console.timeEnd("batchedUpdates"),r.rendered=r.rendered.update(i,t.clusterPositions())})}},{key:"clusterPositions",value:function(){return this.clusters.map(function(e,t){return{id:e.id,note:t+1}})}},{key:"setIncludeUncited",value:function(e){this.includeUncited=e,this.driver.includeUncited(this.includeUncited).unwrap()}},{key:"createCluster",value:function(e){return{id:this.driver.randomClusterId(),cites:e}}},{key:"replaceCluster",value:function(e){var t=this.clusters.findIndex(function(t){return t.id===e.id});this.refCounts.increment(e),this.refCounts.decrement(this.clusters[t]),this.clusters[t]=e,this.driver.insertCluster(e).unwrap()}},{key:"removeCluster",value:function(e){var t=this.clusters.findIndex(function(t){return t.id===e});this.refCounts.decrement(this.clusters[t]),this.clusters.splice(t,1),this.driver.removeCluster(e).unwrap()}},{key:"insertCluster",value:function(e,t){var n=null===t?-1:this.clusters.findIndex(function(e){return e.id===t});if(-1!==n){var r=this.clusters[n];this.refCounts.increment(e),this.refCounts.decrement(r),this.clusters.splice(n,0,e),this.driver.insertCluster(e)}else this.clusters.push(e),this.driver.insertCluster(e)}}]),e}();var H=new(function(){function e(){U()(this,e),k()(this,"cache",{})}var t;return D()(e,[{key:"fetchLocale",value:(t=B()(_.a.mark(function e(t){var n,r;return _.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("string"!=typeof this.cache[t]){e.next=2;break}return e.abrupt("return",this.cache[t]);case 2:return e.next=4,fetch("https://cdn.rawgit.com/citation-style-language/locales/master/locales-".concat(t,".xml"));case 4:if(!(n=e.sent).ok){e.next=11;break}return e.next=8,n.text();case 8:return r=e.sent,this.cache[t]=r,e.abrupt("return",r);case 11:case"end":return e.stop()}},e,this)})),function(e){return t.apply(this,arguments)})}]),e}());function V(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function K(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?V(n,!0).forEach(function(t){k()(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):V(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}for(var W=[{id:"citekey",type:"book",author:[{given:"Kurt",family:"Camembert"},{given:"Amadeus",family:"Rossi"},{given:"Ignatius",family:"Irrelevant"}],title:"Where The Vile Things Are",issued:{raw:"1999-08-09"}},{id:"citekey2",type:"book",author:[{given:"Kurt",family:"Camembert"},{given:"Ariadne",family:"Rossi"},{given:"Ignatius",family:"Irrelevant"}],title:"Where The Vile Things Are",issued:{raw:"1999-08-09"}},{id:"ysuf1",title:"NoAuthor",issued:{raw:"2009-07-07"}},{id:"ysuf2",title:"NoAuthor",issued:{raw:"2009-11-01"}},{id:"foreign",type:"book",title:"Some other title",language:"fr-FR"}],G={id:"r",type:"article-journal",title:"Article",author:[{given:"Alicia",family:"Jones"}],issued:{"date-parts":[[1992]]}},Q=1;Q<=20;Q++)W.push(K({},G,{id:"r"+Q,title:G.title+" "+Q,issued:{"date-parts":[[1992+Q]]}}));var q=W,Z=[{id:"cluster-1",cites:[{id:"citekey"}]},{id:"cluster-2",cites:[{id:"citekey2"}]},{id:"cluster-3",cites:[{id:"citekey",locator:"56"}]},{id:"cluster-4",cites:[{id:"r1"}]},{id:"cluster-5",cites:[{id:"ysuf1"}]},{id:"cluster-6",cites:[{id:"ysuf2"}]},{id:"cluster-7",cites:[{id:"ysuf1"}]},{id:"cluster-8",cites:[{id:"r7"}]}],X={width:"100%",minHeight:"300px",fontFamily:"monospace"},Y={backgroundColor:"#ff00002b",marginBottom:"5px"},$=function(e){var t=e.style,n=e.message,r=e.error;switch(r.tag){case"Invalid":return s.a.createElement("div",null,r.content.map(function(e){var n=t.slice(e.range.start,e.range.end);return s.a.createElement("div",{key:e.range.start*t.length+e.range.end,style:Y},s.a.createElement("p",null,"".concat(e.severity,": ").concat(e.message)),s.a.createElement("pre",{style:{marginLeft:"2em"}},n),e.hint&&s.a.createElement("p",null,e.hint))})," ");default:return s.a.createElement("p",{style:Y},n)}},ee=function(e){var t=e.style,n=e.error;if(n instanceof CiteprocRsDriverError&&"StyleError"==n.data.tag)return s.a.createElement($,{style:t,message:n.message,error:n.data.content});if(n instanceof CslStyleError){var r=n.data;return s.a.createElement($,{style:t,message:n.message,error:r})}return s.a.createElement("p",{style:Y},n.message)},te=function(e){var t=e.driver,n=e.style;return t.match({Ok:function(e){return s.a.createElement("p",null,"locales in use:",s.a.createElement("code",null,JSON.stringify(e.toFetch().unwrap().sort())))},Err:function(e){return s.a.createElement(ee,{style:n,error:e})}})},ne=function(e){var t=e.style,n=e.setStyle,r=e.resetReferences,l=Object(a.useState)(JSON.stringify(q,null,2)),u=i()(l,2),c=u[0],o=u[1],d=function(){try{var e=JSON.parse(c);r(e)}catch(e){console.error("could not parse references json",e)}};Object(a.useEffect)(d,[c]);var f=Object(a.useRef)(!0);f.current&&(f.current=!1,d());var p={width:"50%"};return s.a.createElement("div",null,s.a.createElement("div",{style:{display:"flex"}},s.a.createElement("div",{style:p},s.a.createElement("h3",null,"Style"),s.a.createElement("textarea",{defaultValue:t,onBlur:function(e){return n(e.target.value)},style:X})),s.a.createElement("div",{style:p},s.a.createElement("h3",null,"References"),s.a.createElement("textarea",{defaultValue:c,onBlur:function(e){return o(e.target.value)},style:X}))))};t.default=function(){var e=function(e,t,r){var s=Object(a.useState)(t),u=i()(s,2),c=u[0],o=u[1],d=Object(a.useState)(Object(l.b)()),f=i()(d,2),p=f[0],h=f[1],m=Object(a.useState)(!1),v=i()(m,2),y=v[0],b=v[1],g=Object(a.useState)(Object(l.a)("uninitialized")),w=i()(g,2),k=w[0],E=w[1],O=Object(a.useState)(e),x=i()(O,2),j=x[0],C=x[1],S=Object(a.useState)(l.b),R=i()(S,2),I=R[0],P=R[1],U=Object(a.useState)(Object(l.b)()),A=i()(U,2),D=A[0],N=A[1],F=function(){var e=B()(_.a.mark(function e(t){return _.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return b(!0),e.prev=1,e.next=4,t.fetchLocales();case 4:return e.prev=4,b(!1),e.finish(4);case 7:case"end":return e.stop()}},e,null,[[1,,4,7]])}));return function(t){return e.apply(this,arguments)}}(),T=function(){var e=B()(_.a.mark(function e(t){var r,i,a,s;return _.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.e(5).then(n.bind(null,154));case 2:if(r=e.sent,i=r.Driver,!(a=l.d.from(function(){try{var e=Object(L.Q)(t).unwrap();P(Object(l.e)(e));var n=i.new({style:t,fetcher:H,format:"html"}).unwrap();return n.resetReferences(c).unwrap(),n}catch(e){if(!(e instanceof CiteprocRsError))throw e;N(Object(l.e)(e))}})).is_ok()){e.next=10;break}return(s=a.unwrap()).resetReferences(c).unwrap(),e.next=10,F(s);case 10:E(a);case 11:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),M=function(){var e=B()(_.a.mark(function e(t){var n,r;return _.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!k.is_ok()){e.next=8;break}n=k.unwrap();try{null!=(r=Object(L.Q)(t).unwrap()).info.parent&&(console.log("this is a dependent style!"),console.log(r)),P(Object(l.e)(r)),n.setStyle(t).unwrap(),N(Object(l.b)())}catch(e){console.error(e),console.log(e.data),N(Object(l.e)(e))}return e.next=5,F(n);case 5:h(p.map(function(e){return e.selfUpdate()})),e.next=9;break;case 8:T(t);case 9:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}();Object(a.useEffect)(function(){M(j)},[j]),Object(a.useEffect)(function(){if(N(Object(l.b)()),k.is_ok()){var e=k.unwrap(),t=Object(l.e)(p.match({Some:function(t){return t.rebuild(e)},None:function(){return new z(r,e)}}));h(t)}return function(){k.map(function(e){return e.free()})}},[k]);var J=function(){var e=B()(_.a.mark(function e(t){var n;return _.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(o(t),!k.is_ok()){e.next=7;break}return(n=k.unwrap()).resetReferences(t).unwrap(),e.next=6,F(n);case 6:h(p.map(function(e){return e.selfUpdate()}));case 7:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),V=function(){var e=B()(_.a.mark(function e(t){var n,r,i,a,s,l,u,d;return _.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:for(n=c.slice(0),r=!0,i=!1,a=void 0,e.prev=4,s=function(){var e=u.value,t=n.findIndex(function(t){return t.id==e.id});-1===t?n.push(e):n[t]=e},l=t[Symbol.iterator]();!(r=(u=l.next()).done);r=!0)s();e.next=13;break;case 9:e.prev=9,e.t0=e.catch(4),i=!0,a=e.t0;case 13:e.prev=13,e.prev=14,r||null==l.return||l.return();case 16:if(e.prev=16,!i){e.next=19;break}throw a;case 19:return e.finish(16);case 20:return e.finish(13);case 21:if(k.tap(function(e){return e.insertReferences(t)}),o(n),!k.is_ok()){e.next=28;break}return d=k.unwrap(),e.next=27,F(d);case 27:h(p.map(function(e){return e.selfUpdate()}));case 28:case"end":return e.stop()}},e,null,[[4,9,13,21],[14,,16,20]])}));return function(t){return e.apply(this,arguments)}}();return{document:p,driver:D.into_result_err().and_then(function(){return k}),style:j,setStyle:C,setDocument:h,inFlight:y,resetReferences:J,updateReferences:V,references:c,metadata:I}}('<?xml version="1.0" encoding="utf-8"?>\n<style xmlns="http://purl.org/net/xbiblio/csl" class="note" version="1.0.1" default-locale="en-US">\n  <info>\n    <id>https://github.com/cormacrelf/citeproc-rs/test-style</id>\n    <title>test-style</title>\n    <updated>2000-01-01T00:00:00Z</updated>\n  </info>\n\n  <locale>\n    <terms>\n      <term name="ibid">ibid</term>\n    </terms>\n  </locale>\n\n  <macro name="year">\n    <group>\n      <date variable="issued" form="numeric" date-parts="year" />\n      <text variable="year-suffix" />\n    </group>\n  </macro>\n\n  <macro name="author">\n    <names variable="author">\n      <name initialize="true" initialize-with="." />\n    </names>\n  </macro>\n\n  <citation\n    et-al-min="1"\n    et-al-use-first="1"\n    disambiguate-add-givenname="true"\n    givenname-disambiguation-rule="by-cite"\n    disambiguate-add-names="true"\n    disambiguate-add-year-suffix="true">\n\n    <layout delimiter="; " suffix=".">\n      <choose>\n        <if position="ibid-with-locator">\n          <group delimiter=", ">\n            <text term="ibid" />\n            <text variable="locator" />\n          </group>\n        </if>\n        <else-if position="ibid">\n          <text term="ibid" />\n        </else-if>\n        <else-if position="subsequent">\n          <group delimiter=", ">\n            <group delimiter=" ">\n              <text variable="title" font-style="italic" />\n              <text macro="year" />\n              <text prefix="(n " variable="first-reference-note-number" suffix=")" />\n            </group>\n            <text variable="locator" />\n          </group>\n        </else-if>\n        <else>\n          <group delimiter=", ">\n            <group delimiter=" ">\n              <text macro="author" />\n              <text variable="title" font-style="italic" />\n              <text macro="year" />\n            </group>\n            <text variable="locator" />\n          </group>\n        </else>\n      </choose>\n    </layout>\n  </citation>\n  <bibliography>\n      <layout>\n          <group display="left-margin">\n            <choose>\n                <if variable="author">\n                  <names variable="author" />\n                </if>\n                <else>\n                    <text value="no author" />\n                </else>\n            </choose>\n          </group>\n          <text variable="title" display="right-inline" />\n      </layout>\n  </bibliography>\n</style>\n',q,Z),t=e.document,r=e.driver,u=e.style,o=e.setStyle,d=e.inFlight,f=e.setDocument,p=e.references,h=e.resetReferences,m=e.metadata,v=Object(a.useState)(!1),y=i()(v,2),b=y[0],w=y[1];Object(a.useEffect)(function(){m.map(function(e){e.independentMeta&&w(e.independentMeta.hasBibliography)})},[m]);var k=t.map(function(e){return s.a.createElement(j,{showBibliography:b,document:e,onChange:function(e){return f(Object(l.e)(e))}})}).unwrap_or(null);return s.a.createElement(s.a.Fragment,null,s.a.createElement(ne,{style:u,setStyle:o,inFlight:d,resetReferences:h}),s.a.createElement("section",null,m.map_or(null,function(e){return s.a.createElement("details",null,s.a.createElement("summary",null,"Style Metadata"),s.a.createElement(c.a,{name:!1,src:e,enableClipboard:!1,displayObjectSize:!1,displayDataTypes:!1}))})),s.a.createElement("div",{style:{display:"flex"}},s.a.createElement("section",{style:{flexGrow:1}},s.a.createElement(te,{style:u,driver:r}),k),s.a.createElement("section",{style:{flexGrow:1}},s.a.createElement(g,{references:p,driver:r}))))}}}]);